(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{JNZR:function(e,n,o){"use strict";o.r(n),o.d(n,"LoginModule",(function(){return v}));var r=o("ofXK"),t=o("tyNb"),c=o("fXoL"),i=o("7Vn+"),s=o("FQmJ"),b=o("3Pt+");function a(e,n){1&e&&(c.Pb(0,"div",29),c.Cc(1," Username is required! "),c.Ob())}function d(e,n){1&e&&(c.Pb(0,"div"),c.Cc(1,"Password is required"),c.Ob())}function u(e,n){1&e&&(c.Pb(0,"div"),c.Cc(1," Password must be at least 6 characters "),c.Ob())}function g(e,n){if(1&e&&(c.Pb(0,"div",29),c.Ac(1,d,2,0,"div",30),c.Ac(2,u,2,0,"div",30),c.Ob()),2&e){c.cc();const e=c.rc(16);c.xb(1),c.jc("ngIf",e.errors.required),c.xb(1),c.jc("ngIf",e.errors.minlength)}}function l(e,n){if(1&e&&(c.Pb(0,"div",29),c.Cc(1),c.Ob()),2&e){const e=c.cc(2);c.xb(1),c.Ec(" Login failed: ",e.errorMessage," ")}}const f=function(e){return{focused:e}};function m(e,n){if(1&e){const e=c.Qb();c.Pb(0,"form",13,14),c.ac("ngSubmit",(function(){c.sc(e);const n=c.rc(1),o=c.cc();return n.form.valid&&o.onSubmit()})),c.Pb(2,"div",15),c.Pb(3,"div",16),c.Pb(4,"div",17),c.Pb(5,"span",18),c.Lb(6,"i",19),c.Ob(),c.Ob(),c.Pb(7,"input",20,21),c.ac("ngModelChange",(function(n){return c.sc(e),c.cc().form.username=n}))("focus",(function(){return c.sc(e),c.cc().focus1=!0}))("blur",(function(){return c.sc(e),c.cc().focus1=!1})),c.Ob(),c.Ac(9,a,2,0,"div",22),c.Ob(),c.Ob(),c.Pb(10,"div",15),c.Pb(11,"div",16),c.Pb(12,"div",17),c.Pb(13,"span",18),c.Lb(14,"i",23),c.Ob(),c.Ob(),c.Pb(15,"input",24,25),c.ac("ngModelChange",(function(n){return c.sc(e),c.cc().form.password=n}))("focus",(function(){return c.sc(e),c.cc().focus=!0}))("blur",(function(){return c.sc(e),c.cc().focus=!1})),c.Ob(),c.Ac(17,g,3,2,"div",22),c.Ob(),c.Ob(),c.Pb(18,"div",26),c.Pb(19,"button",27),c.Cc(20," Login "),c.Ob(),c.Ob(),c.Pb(21,"div",28),c.Ac(22,l,2,1,"div",22),c.Ob(),c.Ob()}if(2&e){const e=c.rc(1),n=c.rc(8),o=c.rc(16),r=c.cc();c.xb(2),c.jc("ngClass",c.nc(7,f,!0===r.focus)),c.xb(5),c.jc("ngModel",r.form.username),c.xb(2),c.jc("ngIf",e.submitted&&n.invalid),c.xb(1),c.jc("ngClass",c.nc(9,f,!0===r.focus1)),c.xb(5),c.jc("ngModel",r.form.password),c.xb(2),c.jc("ngIf",e.submitted&&o.invalid),c.xb(5),c.jc("ngIf",e.submitted&&r.isLoginFailed)}}function p(e,n){if(1&e&&(c.Pb(0,"div",31),c.Cc(1),c.Ob()),2&e){const e=c.cc();c.xb(1),c.Ec(" Logged in as ",e.roles,". ")}}const h=t.g.forChild([{path:"",component:(()=>{class e{constructor(e,n,o){this.router=e,this.authService=n,this.tokenStorage=o,this.form={},this.isLoggedIn=!1,this.isLoginFailed=!1,this.errorMessage="",this.roles=[]}ngOnInit(){this.tokenStorage.getToken()&&(this.isLoggedIn=!0,this.roles=this.tokenStorage.getUser().roles)}onSubmit(){this.authService.login(this.form).subscribe(e=>{console.log(e),this.tokenStorage.saveToken(e.accessToken),this.tokenStorage.saveUser(e),this.isLoginFailed=!1,this.isLoggedIn=!0,this.roles=this.tokenStorage.getUser().roles,this.router.navigate(["/home"]).then(()=>{window.location.reload()})},e=>{this.errorMessage=e.error.message,this.isLoginFailed=!0})}reloadPage(){window.location.reload()}}return e.\u0275fac=function(n){return new(n||e)(c.Kb(t.c),c.Kb(i.a),c.Kb(s.a))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-login"]],decls:21,vars:2,consts:[[1,"page-header","section-dark",2,"background-image","url('assets/img/books_3.jpg')"],[1,"container-fluid","mt--7"],[1,"row","d-flex","justify-content-center"],[1,"col-xl-5","mb-5","mb-xl-0"],[1,"card","card-profile","shadow"],[1,"card-header","text-center","border-0","pt-8","pt-md-4","pb-0","pb-md-4"],[1,"card-body","px-lg-5","py-lg-5"],["name","form","novalidate","",3,"ngSubmit",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"row","mt-3"],[1,"col-6"],["href","javascript:void(0)",1,"text-light"],[1,"col-6","text-right"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","mb-3",3,"ngClass"],[1,"input-group","input-group-alternative"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"nc-icon","nc-single-02"],["type","text","placeholder","username","name","username","required","",1,"form-control",3,"ngModel","ngModelChange","focus","blur"],["username","ngModel"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"nc-icon","nc-key-25"],["type","password","placeholder","Password","name","password","required","","minlength","6",1,"form-control",3,"ngModel","ngModelChange","focus","blur"],["password","ngModel"],[1,"text-center"],[1,"btn","btn-primary","my-4"],[1,"form-group"],["role","alert",1,"alert","alert-danger"],[4,"ngIf"],[1,"alert","alert-success"]],template:function(e,n){1&e&&(c.Pb(0,"main"),c.Pb(1,"div",0),c.Pb(2,"div",1),c.Pb(3,"div",2),c.Pb(4,"div",3),c.Pb(5,"div",4),c.Pb(6,"div",5),c.Pb(7,"h3"),c.Cc(8,"Welcome! "),c.Ob(),c.Ob(),c.Pb(9,"div",6),c.Ac(10,m,23,11,"form",7),c.Ac(11,p,2,1,"div",8),c.Ob(),c.Ob(),c.Pb(12,"div",9),c.Pb(13,"div",10),c.Pb(14,"a",11),c.Pb(15,"h4"),c.Cc(16,"Forgot password?"),c.Ob(),c.Ob(),c.Ob(),c.Pb(17,"div",12),c.Pb(18,"a",11),c.Pb(19,"h4"),c.Cc(20,"Create new account"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob()),2&e&&(c.xb(10),c.jc("ngIf",!n.isLoggedIn),c.xb(1),c.jc("ngIf",n.isLoggedIn))},directives:[r.u,b.t,b.l,b.m,r.r,b.b,b.q,b.k,b.n,b.g],styles:[""]}),e})()}]);let v=(()=>{class e{}return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(n){return new(n||e)},imports:[[r.c,h,b.e]]}),e})()}}]);